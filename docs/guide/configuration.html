<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Configuration 1.0.0.RC3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/configuration.html"><strong>2</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/maven.html"><strong>3</strong><span>Maven integration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/plugins.html"><strong>4</strong><span>Publishing Grails plugins</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        <span id="logo"><a href="http://grails.org" target="_blank"><img alt="Grails Logo" title="The Grails Framework" src="../img/grails.png" border="0"/></a></span>
        
        
        <span id="sponsor"><a href="http://springsource.com" target="_blank"><img alt="SpringSource Logo" title="SpringSource - Weapons for the War on Java Complexity" src="../img/springsource-logo.png" border="0"/></a></span>
        
    </div>
    <p>A plugin that allows you to publish Grails plugins, either to a public or private repository. It also supports deploying Grails applications and plugins to Maven repositories without the need to use Maven directly.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/maven.html"><strong>3</strong><span>Maven integration</span> >></a></div>
                


                <div class="project">
                    <h1>2 Configuration - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Peter Ledbrook</p>

                    <p><strong>Version:</strong> 1.0.0.RC3</p>
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#repositories"><strong>2.1</strong><span>Repositories</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#pluginPortals"><strong>2.2</strong><span>Plugin portals</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#scm"><strong>2.3</strong><span>Source control management</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="configuration">2 Configuration</h1>
You can use the <code>publish-plugin</code> command to release plugins to the Grails Central Plugin Repository without any configuration whatsoever, but if you want to manage your own plugin repository and/or portal you will have to master the available configuration settings. The same goes if you want to deploy artifacts to a custom Maven-compatible repository. But don't worry: it's all very straightforward.<p class="paragraph"/>All the configuration options described in the next section can either go into your project's <code>BuildConfig.groovy</code> file or your personal <code>~/.grails/settings.groovy</code>. The latter is particular useful for storing credentials since the file is typically not stored in a shared source repository, thus making it easy to keep that information confidential.<p class="paragraph"/>Let's start by looking at how you can configure a Maven-compatible repository, since this is the most common scenario.



<h2 id="repositories">2.1 Repositories</h2>
With tools like <a href="http://nexus.sonatype.org/" target="blank">Nexus</a> and <a href="http://www.jfrog.com/products.php" target="blank">Artifactory</a>, it's pretty easy to set up a Maven-compatible repository these days. Fortunately, it's equally easy to publish Grails plugins and applications to such repositories.<p class="paragraph"/>Let's say you have a repository running on your local machine and you want to deploy a plugin to it. Your first step should be to assign the repository a unique ID, such as 'myRepo'. Next, you tell Grails where to find the repository by adding an entry to <code>BuildConfig.groovy</code> specifying its URL:<p class="paragraph"/><div class="code"><pre>grails.project.repos.myRepo.url = <span class="java&#45;quote">"http://localhost:8081/repos"</span></pre></div><p class="paragraph"/>The general form of the above configuration option is <code>grails.project.repos.&#60;repoId&#62;.url</code>.<p class="paragraph"/><blockquote class="note">
You can not use a repository ID of 'grailsCentral'. That is because it is reserved for the Grails Central Plugin Repository. The good news is that you can configure the username and password for 'grailsCentral' via the options described below.
</blockquote><p class="paragraph"/>You can now deploy artifacts to the repository by passing a <code>&#45;&#45;repository=myRepo</code> argument to either the <a href="../ref/Command Line/publish-plugin.html" class="commandLine">publish-plugin</a> or <a href="../ref/Command Line/maven-deploy.html" class="commandLine">maven-deploy</a> commands. Since you often deploy a plugin or application to the same repository again and again, typing that argument gets a bit laborious, so you can also specify the name of a default repository to deploy to:<p class="paragraph"/><div class="code"><pre>grails.project.repos.<span class="java&#45;keyword">default</span> = <span class="java&#45;quote">"myRepo"</span></pre></div><p class="paragraph"/>The above configuration option means that a project will be deployed to "myRepo" unless an explicit <code>&#45;&#45;repository</code> argument is provided on the command line. You can also pass a value of "grailsCentral" for the command line option or the 'default' config setting to indicate you want to publish to the Grails Central Plugin Repository. Note that the command line option always takes precedence over other settings.<p class="paragraph"/>Things become slightly more verbose if you want to provide extra details about the repository. What about user credentials for example? Here's a comprehensive configuration:<p class="paragraph"/><div class="code"><pre>grails.project.repos.myRepo.url = <span class="java&#45;quote">"http://localhost:8081/repos"</span>
grails.project.repos.myRepo.type = <span class="java&#45;quote">"maven"</span>
grails.project.repos.myRepo.username = <span class="java&#45;quote">"admin"</span>
grails.project.repos.myRepo.password = <span class="java&#45;quote">"password"</span>
grails.project.repos.myRepo.portal = <span class="java&#45;quote">"grailsCentral"</span></pre></div><p class="paragraph"/>As you can see, even a complete explicit configuration is pretty short. So what do the various entries mean?
<ul class="star">
<li><code>url</code> - the URL to use when connecting to the remote repository. Typically this is HTTP-based, but "svn+ssh" is not uncommon for old-style Subversion plugin repositories.</li>
<li><code>type</code> - can be either "maven" or "svn", but the former is the default value so it's rare to explicitly declare a value of "maven" for this option.</li>
<li><code>username</code> - the username for connecting to the repository.</li>
<li><code>password</code> - the password for connecting to the repository.</li>
<li><code>portal</code> - the ID of the plugin portal to notify when publishing a plugin to this repository. Only affects the <code>publish-plugin</code> command.</li>
</ul><p class="paragraph"/>These settings are common to both Maven-compatible and Subversion repositories - it's only the values that typically differ between them. It's also worth bearing in mind that Subversion repositories can only be used for plugins.<p class="paragraph"/>The last option, <code>portal</code>, raises the question of how to declare plugin portals. What exactly is meant by a portal ID? The answer lies with portal configuration.



<h2 id="pluginPortals">2.2 Plugin portals</h2>
When a Grails plugin is published to a repository, a plugin portal can optionally be notified of the release. For example, when you publish a plugin to the Grails Central Plugin Repository, the command will automatically notify the <a href="http://grails.org/plugins" target="blank">main plugin portal</a> on the grails.org website. That means people can see the details of the new release almost immediately.<p class="paragraph"/>Like repositories, portals have very few configuration options:<p class="paragraph"/><div class="code"><pre>grails.project.portal.&#60;portalId&#62;.url = <span class="java&#45;quote">"http://beta.grails.org/plugin/"</span> 
grails.project.portal.&#60;portalId&#62;.username = <span class="java&#45;quote">"joe"</span> 
grails.project.portal.&#60;portalId&#62;.password = <span class="java&#45;quote">"ht56jU&#38;B"</span></pre></div>
<ul class="star">
<li><code>url</code> - the URL of the plugin portal.</li>
<li><code>username</code> - the username to use when notifying the portal.</li>
<li><code>password</code> - the password to use.</li>
</ul><p class="paragraph"/>One thing to bear in mind: as with repositories, the ID 'grailsCentral' is reserved, this time for the <a href="http://grails.org/plugins/" target="blank">main plugin portal</a> on grails.org. Of course, you can still configure a username and password for this portal using the above settings.



<h2 id="scm">2.3 Source control management</h2>
By default, source control management is enabled for the <code>publish-plugin</code> command. This means that the command ensures that the latest changes are committed and tagged before a plugin is published. If you don't want the command to do this, then you can disable it via the <code>&#45;&#45;noScm</code> command line option, but that gets tedious if you use it every time you run the command.<p class="paragraph"/>An alternative approach is to use a configuration setting to disable source control management for the project (or all projects if you put it into <code>~/.grails/settings.groovy</code>):<p class="paragraph"/><div class="code"><pre>grails.release.scm.enabled = <span class="java&#45;keyword">false</span></pre></div><p class="paragraph"/>Once the above setting is in place, <code>publish-plugin</code> will no longer attempt to commit and tag source changes. Of course, if you do this you lose the benefit of the plugin keeping the source and the published plugins reliably in sync.



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/maven.html"><strong>3</strong><span>Maven integration</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-pom.html">generate-pom</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/maven-deploy.html">maven-deploy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/maven-install.html">maven-install</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/publish-plugin.html">publish-plugin</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
